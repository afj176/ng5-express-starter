{"version":3,"sources":["test_lib.es6"],"names":[],"mappings":"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","file":"angular2/src/test_lib/test_lib.js","sourcesContent":["import {assert} from \"rtts_assert/rtts_assert\";\nimport {DOM} from 'angular2/src/dom/dom_adapter';\nimport {StringMapWrapper} from 'angular2/src/facade/collection';\nimport {bind} from 'angular2/di';\nimport {createTestInjector,\n  FunctionWithParamTokens,\n  inject} from './test_injector';\nexport {inject} from './test_injector';\nexport {proxy} from 'rtts_assert/rtts_assert';\nvar _global = typeof window === 'undefined' ? global : window;\nexport var afterEach = _global.afterEach;\nexport var expect = _global.expect;\nexport var IS_DARTIUM = false;\nexport class AsyncTestCompleter {\n  constructor(done) {\n    assert.argumentTypes(done, Function);\n    this._done = done;\n  }\n  done() {\n    this._done();\n  }\n}\nObject.defineProperty(AsyncTestCompleter, \"parameters\", {get: function() {\n    return [[Function]];\n  }});\nvar jsmBeforeEach = _global.beforeEach;\nvar jsmDescribe = _global.describe;\nvar jsmDDescribe = _global.ddescribe;\nvar jsmXDescribe = _global.xdescribe;\nvar jsmIt = _global.it;\nvar jsmIIt = _global.iit;\nvar jsmXIt = _global.xit;\nvar runnerStack = [];\nvar inIt = false;\nvar testBindings;\nclass BeforeEachRunner {\n  constructor(parent) {\n    assert.argumentTypes(parent, BeforeEachRunner);\n    this._fns = [];\n    this._parent = parent;\n  }\n  beforeEach(fn) {\n    assert.argumentTypes(fn, FunctionWithParamTokens);\n    this._fns.push(fn);\n  }\n  run(injector) {\n    if (this._parent)\n      this._parent.run();\n    this._fns.forEach((fn) => fn.execute(injector));\n  }\n}\nObject.defineProperty(BeforeEachRunner, \"parameters\", {get: function() {\n    return [[BeforeEachRunner]];\n  }});\nObject.defineProperty(BeforeEachRunner.prototype.beforeEach, \"parameters\", {get: function() {\n    return [[FunctionWithParamTokens]];\n  }});\njsmBeforeEach(() => {\n  testBindings = [];\n});\nfunction _describe(jsmFn, ...args) {\n  var parentRunner = runnerStack.length === 0 ? null : runnerStack[runnerStack.length - 1];\n  var runner = new BeforeEachRunner(parentRunner);\n  runnerStack.push(runner);\n  var suite = jsmFn(...args);\n  runnerStack.pop();\n  return suite;\n}\nexport function describe(...args) {\n  return _describe(jsmDescribe, ...args);\n}\nexport function ddescribe(...args) {\n  return _describe(jsmDDescribe, ...args);\n}\nexport function xdescribe(...args) {\n  return _describe(jsmXDescribe, ...args);\n}\nexport function beforeEach(fn) {\n  if (runnerStack.length > 0) {\n    var runner = runnerStack[runnerStack.length - 1];\n    if (!(fn instanceof FunctionWithParamTokens)) {\n      fn = inject([], fn);\n    }\n    runner.beforeEach(fn);\n  } else {\n    jsmBeforeEach(fn);\n  }\n}\nexport function beforeEachBindings(fn) {\n  jsmBeforeEach(() => {\n    var bindings = fn();\n    if (!bindings)\n      return ;\n    testBindings = [...testBindings, ...bindings];\n  });\n}\nfunction _it(jsmFn, name, fn) {\n  var runner = runnerStack[runnerStack.length - 1];\n  jsmFn(name, function(done) {\n    var async = false;\n    var completerBinding = bind(AsyncTestCompleter).toFactory(() => {\n      if (!inIt)\n        throw new Error('AsyncTestCompleter can only be injected in an \"it()\"');\n      async = true;\n      return new AsyncTestCompleter(done);\n    });\n    var injector = createTestInjector([...testBindings, completerBinding]);\n    runner.run(injector);\n    if (!(fn instanceof FunctionWithParamTokens)) {\n      fn = inject([], fn);\n    }\n    inIt = true;\n    fn.execute(injector);\n    inIt = false;\n    if (!async)\n      done();\n  });\n}\nexport function it(name, fn) {\n  return _it(jsmIt, name, fn);\n}\nexport function xit(name, fn) {\n  return _it(jsmXIt, name, fn);\n}\nexport function iit(name, fn) {\n  return _it(jsmIIt, name, fn);\n}\n_global.print = function(msg) {\n  if (_global.dump) {\n    _global.dump(msg);\n  } else {\n    _global.console.log(msg);\n  }\n};\n_global.Map.prototype.jasmineToString = function() {\n  var m = this;\n  if (!m) {\n    return '' + m;\n  }\n  var res = [];\n  m.forEach((v, k) => {\n    res.push(`${k}:${v}`);\n  });\n  return `{ ${res.join(',')} }`;\n};\n_global.beforeEach(function() {\n  jasmine.addMatchers({\n    toEqual: function(util, customEqualityTesters) {\n      return {compare: function(actual, expected) {\n          return {pass: util.equals(actual, expected, [compareMap])};\n        }};\n      function compareMap(actual, expected) {\n        if (actual instanceof Map) {\n          var pass = actual.size === expected.size;\n          if (pass) {\n            actual.forEach((v, k) => {\n              pass = pass && util.equals(v, expected.get(k));\n            });\n          }\n          return pass;\n        } else {\n          return undefined;\n        }\n      }\n    },\n    toBePromise: function() {\n      return {compare: function(actual, expectedClass) {\n          var pass = typeof actual === 'object' && typeof actual.then === 'function';\n          return {\n            pass: pass,\n            get message() {\n              return 'Expected ' + actual + ' to be a promise';\n            }\n          };\n        }};\n    },\n    toBeAnInstanceOf: function() {\n      return {compare: function(actual, expectedClass) {\n          var pass = typeof actual === 'object' && actual instanceof expectedClass;\n          return {\n            pass: pass,\n            get message() {\n              return 'Expected ' + actual + ' to be an instance of ' + expectedClass;\n            }\n          };\n        }};\n    },\n    toHaveText: function() {\n      return {compare: function(actual, expectedText) {\n          var actualText = elementText(actual);\n          return {\n            pass: actualText == expectedText,\n            get message() {\n              return 'Expected ' + actualText + ' to be equal to ' + expectedText;\n            }\n          };\n        }};\n    },\n    toImplement: function() {\n      return {compare: function(actualObject, expectedInterface) {\n          var objProps = Object.keys(actualObject.constructor.prototype);\n          var intProps = Object.keys(expectedInterface.prototype);\n          var missedMethods = [];\n          intProps.forEach((k) => {\n            if (!actualObject.constructor.prototype[k])\n              missedMethods.push(k);\n          });\n          return {\n            pass: missedMethods.length == 0,\n            get message() {\n              return 'Expected ' + actualObject + ' to have the following methods: ' + missedMethods.join(\", \");\n            }\n          };\n        }};\n    }\n  });\n});\nexport class SpyObject {\n  constructor(type = null) {\n    if (type) {\n      for (var prop in type.prototype) {\n        var m = type.prototype[prop];\n        if (typeof m === 'function') {\n          this.spy(prop);\n        }\n      }\n    }\n  }\n  spy(name) {\n    if (!this[name]) {\n      this[name] = this._createGuinnessCompatibleSpy();\n    }\n    return this[name];\n  }\n  static stub(object = null, config = null, overrides = null) {\n    if (!(object instanceof SpyObject)) {\n      overrides = config;\n      config = object;\n      object = new SpyObject();\n    }\n    var m = StringMapWrapper.merge(config, overrides);\n    StringMapWrapper.forEach(m, (value, key) => {\n      object.spy(key).andReturn(value);\n    });\n    return object;\n  }\n  rttsAssert(value) {\n    return true;\n  }\n  _createGuinnessCompatibleSpy() {\n    var newSpy = jasmine.createSpy();\n    newSpy.andCallFake = newSpy.and.callFake;\n    newSpy.andReturn = newSpy.and.returnValue;\n    newSpy.and.returnValue(null);\n    return newSpy;\n  }\n}\nfunction elementText(n) {\n  var hasNodes = (n) => {\n    var children = DOM.childNodes(n);\n    return children && children.length > 0;\n  };\n  if (n instanceof Array) {\n    return n.map((nn) => elementText(nn)).join(\"\");\n  }\n  if (DOM.isCommentNode(n)) {\n    return '';\n  }\n  if (DOM.isElementNode(n) && DOM.tagName(n) == 'CONTENT') {\n    return elementText(Array.prototype.slice.apply(DOM.getDistributedNodes(n)));\n  }\n  if (DOM.hasShadowRoot(n)) {\n    return elementText(DOM.childNodesAsList(DOM.getShadowRoot(n)));\n  }\n  if (hasNodes(n)) {\n    return elementText(DOM.childNodesAsList(n));\n  }\n  return DOM.getText(n);\n}\n//# sourceMappingURL=test_lib.es6.map\n\n//# sourceMappingURL=./test_lib.map"]}