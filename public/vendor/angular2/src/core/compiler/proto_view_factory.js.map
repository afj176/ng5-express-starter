{"version":3,"sources":["proto_view_factory.es6"],"names":[],"mappings":"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","file":"angular2/src/core/compiler/proto_view_factory.js","sourcesContent":["import {assert} from \"rtts_assert/rtts_assert\";\nimport {Injectable} from 'angular2/di';\nimport {List,\n  ListWrapper,\n  MapWrapper} from 'angular2/src/facade/collection';\nimport {isPresent,\n  isBlank} from 'angular2/src/facade/lang';\nimport {reflector} from 'angular2/src/reflection/reflection';\nimport {ChangeDetection,\n  DirectiveIndex} from 'angular2/change_detection';\nimport {Component,\n  Viewport,\n  DynamicComponent} from '../annotations/annotations';\nimport * as renderApi from 'angular2/src/render/api';\nimport {AppProtoView} from './view';\nimport {ProtoElementInjector,\n  DirectiveBinding} from './element_injector';\nexport class ProtoViewFactory {\n  constructor(changeDetection) {\n    assert.argumentTypes(changeDetection, ChangeDetection);\n    this._changeDetection = changeDetection;\n  }\n  createProtoView(componentBinding, renderProtoView, directives) {\n    assert.argumentTypes(componentBinding, DirectiveBinding, renderProtoView, renderApi.ProtoViewDto, directives, assert.genericType(List, DirectiveBinding));\n    var protoChangeDetector;\n    if (isBlank(componentBinding)) {\n      protoChangeDetector = this._changeDetection.createProtoChangeDetector('root', null);\n    } else {\n      var componentAnnotation = assert.type(componentBinding.annotation, Component);\n      protoChangeDetector = this._changeDetection.createProtoChangeDetector('dummy', componentAnnotation.changeDetection);\n    }\n    var protoView = new AppProtoView(renderProtoView.render, protoChangeDetector);\n    for (var i = 0; i < renderProtoView.elementBinders.length; i++) {\n      var renderElementBinder = renderProtoView.elementBinders[i];\n      var sortedDirectives = new SortedDirectives(renderElementBinder.directives, directives);\n      var parentPeiWithDistance = this._findParentProtoElementInjectorWithDistance(i, protoView.elementBinders, renderProtoView.elementBinders);\n      var protoElementInjector = this._createProtoElementInjector(i, parentPeiWithDistance, sortedDirectives, renderElementBinder);\n      this._createElementBinder(protoView, renderElementBinder, protoElementInjector, sortedDirectives);\n      this._createDirectiveBinders(protoView, i, sortedDirectives);\n    }\n    MapWrapper.forEach(renderProtoView.variableBindings, (mappedName, varName) => {\n      protoView.bindVariable(varName, mappedName);\n    });\n    return assert.returnType((protoView), AppProtoView);\n  }\n  _findParentProtoElementInjectorWithDistance(binderIndex, elementBinders, renderElementBinders) {\n    var distance = 0;\n    do {\n      var renderElementBinder = renderElementBinders[binderIndex];\n      binderIndex = renderElementBinder.parentIndex;\n      if (binderIndex !== -1) {\n        distance += renderElementBinder.distanceToParent;\n        var elementBinder = elementBinders[binderIndex];\n        if (isPresent(elementBinder.protoElementInjector)) {\n          return new ParentProtoElementInjectorWithDistance(elementBinder.protoElementInjector, distance);\n        }\n      }\n    } while (binderIndex !== -1);\n    return new ParentProtoElementInjectorWithDistance(null, -1);\n  }\n  _createProtoElementInjector(binderIndex, parentPeiWithDistance, sortedDirectives, renderElementBinder) {\n    var protoElementInjector = null;\n    var hasVariables = MapWrapper.size(renderElementBinder.variableBindings) > 0;\n    if (sortedDirectives.directives.length > 0 || hasVariables) {\n      protoElementInjector = new ProtoElementInjector(parentPeiWithDistance.protoElementInjector, binderIndex, sortedDirectives.directives, isPresent(sortedDirectives.componentDirective), parentPeiWithDistance.distance);\n      protoElementInjector.attributes = renderElementBinder.readAttributes;\n      if (hasVariables && !isPresent(sortedDirectives.viewportDirective)) {\n        protoElementInjector.exportComponent = isPresent(sortedDirectives.componentDirective);\n        protoElementInjector.exportElement = isBlank(sortedDirectives.componentDirective);\n        var exportImplicitName = MapWrapper.get(renderElementBinder.variableBindings, '\\$implicit');\n        if (isPresent(exportImplicitName)) {\n          protoElementInjector.exportImplicitName = exportImplicitName;\n        }\n      }\n    }\n    return protoElementInjector;\n  }\n  _createElementBinder(protoView, renderElementBinder, protoElementInjector, sortedDirectives) {\n    var parent = null;\n    if (renderElementBinder.parentIndex !== -1) {\n      parent = protoView.elementBinders[renderElementBinder.parentIndex];\n    }\n    var elBinder = protoView.bindElement(parent, renderElementBinder.distanceToParent, protoElementInjector, sortedDirectives.componentDirective, sortedDirectives.viewportDirective);\n    for (var i = 0; i < renderElementBinder.textBindings.length; i++) {\n      protoView.bindTextNode(renderElementBinder.textBindings[i]);\n    }\n    MapWrapper.forEach(renderElementBinder.propertyBindings, (astWithSource, propertyName) => {\n      protoView.bindElementProperty(astWithSource, propertyName);\n    });\n    protoView.bindEvent(renderElementBinder.eventBindings, -1);\n    MapWrapper.forEach(renderElementBinder.variableBindings, (mappedName, varName) => {\n      MapWrapper.set(protoView.protoLocals, mappedName, null);\n    });\n    return elBinder;\n  }\n  _createDirectiveBinders(protoView, boundElementIndex, sortedDirectives) {\n    for (var i = 0; i < sortedDirectives.renderDirectives.length; i++) {\n      var directiveBinder = sortedDirectives.renderDirectives[i];\n      MapWrapper.forEach(directiveBinder.propertyBindings, (astWithSource, propertyName) => {\n        var setter = reflector.setter(propertyName);\n        protoView.bindDirectiveProperty(i, astWithSource, propertyName, setter);\n      });\n      MapWrapper.forEach(directiveBinder.hostPropertyBindings, (astWithSource, propertyName) => {\n        var directiveIndex = new DirectiveIndex(boundElementIndex, i);\n        protoView.bindHostElementProperty(astWithSource, propertyName, directiveIndex);\n      });\n      protoView.bindEvent(directiveBinder.eventBindings, i);\n    }\n  }\n}\nObject.defineProperty(ProtoViewFactory, \"annotations\", {get: function() {\n    return [new Injectable()];\n  }});\nObject.defineProperty(ProtoViewFactory, \"parameters\", {get: function() {\n    return [[ChangeDetection]];\n  }});\nObject.defineProperty(ProtoViewFactory.prototype.createProtoView, \"parameters\", {get: function() {\n    return [[DirectiveBinding], [renderApi.ProtoViewDto], [assert.genericType(List, DirectiveBinding)]];\n  }});\nclass SortedDirectives {\n  constructor(renderDirectives, allDirectives) {\n    this.renderDirectives = [];\n    this.directives = [];\n    this.viewportDirective = null;\n    this.componentDirective = null;\n    ListWrapper.forEach(renderDirectives, (renderDirectiveBinder) => {\n      var directiveBinding = allDirectives[renderDirectiveBinder.directiveIndex];\n      if ((directiveBinding.annotation instanceof Component) || (directiveBinding.annotation instanceof DynamicComponent)) {\n        this.componentDirective = directiveBinding;\n        ListWrapper.insert(this.renderDirectives, 0, renderDirectiveBinder);\n        ListWrapper.insert(this.directives, 0, directiveBinding);\n      } else {\n        if (directiveBinding.annotation instanceof Viewport) {\n          this.viewportDirective = directiveBinding;\n        }\n        ListWrapper.push(this.renderDirectives, renderDirectiveBinder);\n        ListWrapper.push(this.directives, directiveBinding);\n      }\n    });\n  }\n}\nclass ParentProtoElementInjectorWithDistance {\n  constructor(protoElementInjector, distance) {\n    assert.argumentTypes(protoElementInjector, ProtoElementInjector, distance, assert.type.number);\n    this.protoElementInjector = protoElementInjector;\n    this.distance = distance;\n  }\n}\nObject.defineProperty(ParentProtoElementInjectorWithDistance, \"parameters\", {get: function() {\n    return [[ProtoElementInjector], [assert.type.number]];\n  }});\n//# sourceMappingURL=proto_view_factory.js.map\n\n//# sourceMappingURL=./proto_view_factory.map"]}